<!DOCTYPE html>
<html lang="en">
<head>
    <script>
    (function () {
      const set=(k,v)=>localStorage.setItem(k,v), get=(k)=>localStorage.getItem(k);

      // --- Color Conversion & Palette Generation ---
      function hexToRgb(hex) {
          let r = 0, g = 0, b = 0;
          if (hex.length === 4) { r = "0x" + hex[1] + hex[1]; g = "0x" + hex[2] + hex[2]; b = "0x" + hex[3] + hex[3]; }
          else if (hex.length === 7) { r = "0x" + hex[1] + hex[2]; g = "0x" + hex[3] + hex[4]; b = "0x" + hex[5] + hex[6]; }
          return { r: +r, g: +g, b: +b };
      }
      function rgbToHex(r, g, b) { return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1).toUpperCase(); }
      function rgbToHsl(r, g, b) {
          r /= 255; g /= 255; b /= 255;
          const max = Math.max(r, g, b), min = Math.min(r, g, b);
          let h, s, l = (max + min) / 2;
          if (max === min) { h = s = 0; }
          else {
              const d = max - min;
              s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
              switch (max) {
                  case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                  case g: h = (b - r) / d + 2; break;
                  case b: h = (r - g) / d + 4; break;
              }
              h /= 6;
          }
          return { h: h * 360, s: s * 100, l: l * 100 };
      }
      function hslToRgb(h, s, l) {
          s /= 100; l /= 100;
          let c = (1 - Math.abs(2 * l - 1)) * s, x = c * (1 - Math.abs((h / 60) % 2 - 1)), m = l - c / 2, r = 0, g = 0, b = 0;
          if (0 <= h && h < 60) { [r, g, b] = [c, x, 0]; } else if (60 <= h && h < 120) { [r, g, b] = [x, c, 0]; } else if (120 <= h && h < 180) { [r, g, b] = [0, c, x]; } else if (180 <= h && h < 240) { [r, g, b] = [0, x, c]; } else if (240 <= h && h < 300) { [r, g, b] = [x, 0, c]; } else if (300 <= h && h < 360) { [r, g, b] = [c, 0, x]; }
          return { r: Math.round((r + m) * 255), g: Math.round((g + m) * 255), b: Math.round((b + m) * 255) };
      }
      function generatePalette(sourceHex) {
          const { r, g, b } = hexToRgb(sourceHex);
          const { h, s } = rgbToHsl(r, g, b);
          const p = {};
          const tones = {
              primary_light: 40, on_primary_light: 100, primary_container_light: 90, on_primary_container_light: 10,
              secondary_light: 40, on_secondary_light: 100, secondary_container_light: 90, on_secondary_container_light: 10,
              tertiary_light: 40, on_tertiary_light: 100, tertiary_container_light: 90, on_tertiary_container_light: 10,
              primary_dark: 80, on_primary_dark: 20, primary_container_dark: 30, on_primary_container_dark: 90,
              secondary_dark: 80, on_secondary_dark: 20, secondary_container_dark: 30, on_secondary_container_dark: 90,
              tertiary_dark: 80, on_tertiary_dark: 20, tertiary_container_dark: 30, on_tertiary_container_dark: 90,
          };
          for (const [key, tone] of Object.entries(tones)) {
              let hue = h;
              if (key.startsWith('secondary')) hue = (h + 60) % 360;
              if (key.startsWith('tertiary')) hue = (h - 60 + 360) % 360;
              const sat = key.includes('container') ? Math.min(s, 48) : s;
              const rgb = hslToRgb(hue, sat, tone);
              p[key] = rgbToHex(rgb.r, rgb.g, rgb.b);
          }
          return p;
      }

      function applyAccent(hex, persist = false) {
          if (!hex) return;
          document.documentElement.style.setProperty('--accent',hex);
          const p = generatePalette(hex);
          const styleId = 'df-dynamic-theme';
          let styleEl = document.getElementById(styleId);
          if (!styleEl) {
              styleEl = document.createElement('style');
              styleEl.id = styleId;
              document.head.appendChild(styleEl);
          }
          styleEl.textContent = `
            html[data-theme="light"] {
              --md-sys-color-primary: ${p.primary_light}; --md-sys-color-on-primary: ${p.on_primary_light}; --md-sys-color-primary-container: ${p.primary_container_light}; --md-sys-color-on-primary-container: ${p.on_primary_container_light};
              --md-sys-color-secondary: ${p.secondary_light}; --md-sys-color-on-secondary: ${p.on_secondary_light}; --md-sys-color-secondary-container: ${p.secondary_container_light}; --md-sys-color-on-secondary-container: ${p.on_secondary_container_light};
              --md-sys-color-tertiary: ${p.tertiary_light}; --md-sys-color-on-tertiary: ${p.on_tertiary_light}; --md-sys-color-tertiary-container: ${p.tertiary_container_light}; --md-sys-color-on-tertiary-container: ${p.on_tertiary_container_light};
            }
            html[data-theme="dark"] {
              --md-sys-color-primary: ${p.primary_dark}; --md-sys-color-on-primary: ${p.on_primary_dark}; --md-sys-color-primary-container: ${p.primary_container_dark}; --md-sys-color-on-primary-container: ${p.on_primary_container_dark};
              --md-sys-color-secondary: ${p.secondary_dark}; --md-sys-color-on-secondary: ${p.on_secondary_dark}; --md-sys-color-secondary-container: ${p.secondary_container_dark}; --md-sys-color-on-secondary-container: ${p.on_secondary_container_dark};
              --md-sys-color-tertiary: ${p.tertiary_dark}; --md-sys-color-on-tertiary: ${p.on_tertiary_dark}; --md-sys-color-tertiary-container: ${p.tertiary_container_dark}; --md-sys-color-on-tertiary-container: ${p.on_tertiary_container_dark};
            }`;
          if (persist) set('df_accent', hex);
      }
      
      function applyTheme(mode, persist = false) {
          const r = document.documentElement;
          let finalMode = mode;
          if (mode === 'system') {
              finalMode = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
          }
          r.dataset.theme = finalMode;
          r.classList.remove('light', 'dark');
          if (finalMode === 'light') r.classList.add('light');
          if (finalMode === 'dark') r.classList.add('dark');
          if (persist) set('df_theme', mode);
      }

      // --- Initial Setup & Defaults ---
      const defaultTheme = 'system';
      const defaultAccent = '#3B82F6';
      const defaultPalette = ['#6B7280', '#3B82F6', '#22C55E', '#0EA5E9', '#EF4444'];
      
      // IMMEDIATELY define window.DFTheme with core functions and defaults
      window.DFTheme = {
        applyTheme,
        applyAccent,
        resetToDefaults: () => {
          localStorage.removeItem('df_theme');
          localStorage.removeItem('df_accent');
          applyTheme(defaultTheme, true);
          applyAccent(defaultAccent, true);
        },
        palette: defaultPalette
      };

      // Synchronously apply initial theme from localStorage or defaults
      applyAccent(get('df_accent') || defaultAccent);
      applyTheme(get('df_theme') || defaultTheme);

      // Add media query listener for system theme changes
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
          if (get('df_theme') === 'system') { applyTheme('system'); }
      });
      
      // --- Asynchronously load and apply CMS settings ---
      async function loadSettings() {
          try {
              const r = await fetch('/api/settings/get.php', {credentials: 'include'});
              const d = await r.json();
              const s = d.settings || {};
              window.__siteSettings = s;
              
              if(s.seo?.site_title) document.title = s.seo.site_title;
              if(s.seo?.site_description){ let m = document.querySelector('meta[name="description"]'); if(!m){ m = document.createElement('meta'); m.name = 'description'; document.head.appendChild(m); } m.setAttribute('content', s.seo.site_description); }
              
              const adminTheme = s.branding?.theme_default || defaultTheme;
              const adminAccent = s.branding?.accent_default || defaultAccent;

              // Re-apply theme only if localStorage is not set, using CMS values.
              if (!get('df_accent')) applyAccent(adminAccent);
              if (!get('df_theme')) applyTheme(adminTheme);
              
              if(s.pixels?.gtm_id){ (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer',s.pixels.gtm_id); }
              if(s.pixels?.ga4_id){ const g = document.createElement('script'); g.async = true; g.src = 'https://www.googletagmanager.com/gtag/js?id=' + s.pixels.ga4_id; document.head.appendChild(g); window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', s.pixels.ga4_id); }
              if(s.pixels?.meta_pixel_id){ !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,document,'script','https://connect.facebook.net/en_US/fbevents.js'); fbq('init', s.pixels.meta_pixel_id); fbq('track','PageView'); }
              if(s.pixels?.custom_head_html){ const div = document.createElement('div'); div.innerHTML = s.pixels.custom_head_html; [...div.childNodes].forEach(n => document.head.appendChild(n)); }
              
              // Update DFTheme with CMS-specifics
              window.DFTheme.palette = s.branding?.palette?.length ? s.branding.palette : defaultPalette;
              window.DFTheme.resetToDefaults = () => {
                localStorage.removeItem('df_theme');
                localStorage.removeItem('df_accent');
                applyTheme(adminTheme, true);
                applyAccent(adminAccent, true);
              };
          } catch(e) { 
            console.error('Settings bootstrap failed, using defaults.', e);
          }
      }
      loadSettings();
    })();
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Daniel Forero • Material 3 Web Portfolio</title>
    <meta name="description" content="I turn Web3 ideas into real-world businesses—and then make sure the world hears about them.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="#">
    <meta property="og:title" content="Daniel Forero • Material 3 Web Portfolio">
    <meta property="og:description" content="I turn Web3 ideas into real-world businesses—and then make sure the world hears about them.">
    <meta property="og:image" content="https://picsum.photos/1200/630">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="#">
    <meta property="twitter:title" content="Daniel Forero • Material 3 Web Portfolio">
    <meta property="twitter:description" content="I turn Web3 ideas into real-world businesses—and then make sure the world hears about them.">
    <meta property="twitter:image" content="https://picsum.photos/1200/630">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <style>
      /* Material 3 Inspired Theme Tokens - FALLBACK ONLY */
      :root {
        /* Default Light Theme Colors */
        --md-sys-color-primary: #005FAF;
        --md-sys-color-on-primary: #FFFFFF;
        --md-sys-color-primary-container: #D5E3FF;
        --md-sys-color-on-primary-container: #001C3B;
        --md-sys-color-secondary: #535f70;
        --md-sys-color-on-secondary: #FFFFFF;
        --md-sys-color-secondary-container: #D7E3F8;
        --md-sys-color-on-secondary-container: #101C2B;
        --md-sys-color-tertiary: #6B5778;
        --md-sys-color-on-tertiary: #FFFFFF;
        --md-sys-color-tertiary-container: #F3DAFF;
        --md-sys-color-on-tertiary-container: #251431;

        /* Base colors that are consistent across themes */
        --md-sys-color-error: #BA1A1A;
        --md-sys-color-on-error: #FFFFFF;
        --md-sys-color-error-container: #FFDAD6;
        --md-sys-color-on-error-container: #410002;
        --md-sys-color-background: #F8F9FA;
        --md-sys-color-on-background: #1A1C1E;
        --md-sys-color-surface: #F8F9FA;
        --md-sys-color-on-surface: #1A1C1E;
        --md-sys-color-surface-variant: #E1E2E6;
        --md-sys-color-on-surface-variant: #43474E;
        --md-sys-color-outline: #74777F;
        --md-sys-color-shadow: #000000;
        --md-sys-color-inverse-surface: #2F3033;
        --md-sys-color-inverse-on-surface: #F1F0F4;
        --md-sys-color-inverse-primary: #BDC1C6;

        font-family: 'Inter', sans-serif;
      }

      .dark {
         /* Default Dark Theme Colors */
        --md-sys-color-primary: #A7C8FF;
        --md-sys-color-on-primary: #003060;
        --md-sys-color-primary-container: #004787;
        --md-sys-color-on-primary-container: #D5E3FF;
        --md-sys-color-secondary: #BBC7DB;
        --md-sys-color-on-secondary: #253141;
        --md-sys-color-secondary-container: #3C4858;
        --md-sys-color-on-secondary-container: #D7E3F8;
        --md-sys-color-tertiary: #D7BDE4;
        --md-sys-color-on-tertiary: #3B2947;
        --md-sys-color-tertiary-container: #52405F;
        --md-sys-color-on-tertiary-container: #F3DAFF;
        
         /* Base dark colors */
        --md-sys-color-error: #FFB4AB;
        --md-sys-color-on-error: #690005;
        --md-sys-color-error-container: #93000A;
        --md-sys-color-on-error-container: #FFDAD6;
        --md-sys-color-background: #1A1C1E;
        --md-sys-color-on-background: #E3E2E6;
        --md-sys-color-surface: #1A1C1E;
        --md-sys-color-on-surface: #E3E2E6;
        --md-sys-color-surface-variant: #43474E;
        --md-sys-color-on-surface-variant: #C4C6CF;
        --md-sys-color-outline: #8E9199;
        --md-sys-color-shadow: #000000;
        --md-sys-color-inverse-surface: #E3E2E6;
        --md-sys-color-inverse-on-surface: #1A1C1E;
        --md-sys-color-inverse-primary: #5F6368;
      }
      body {
        background-color: var(--md-sys-color-background);
        color: var(--md-sys-color-on-background);
      }
      .material-symbols-outlined {
        font-variation-settings:
        'FILL' 0,
        'wght' 400,
        'GRAD' 0,
        'opsz' 24
      }

      /* Logo Slider Animation */
      @keyframes scroll {
        from { transform: translateX(0); }
        to { transform: translateX(-100%); }
      }
      .animate-scroll {
        animation: scroll 60s linear infinite;
      }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react-router-dom": "https://aistudiocdn.com/react-router-dom@^7.9.5",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.28.0"
  }
}
</script>
</head>
<body class="antialiased">
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>

    <script>
    document.addEventListener('click', (e) => {
      const root = document.getElementById('theme-fab');
      if (!root) return;

      let themeChanged = false;
      const themeButton = e.target.closest('[data-theme]');
      const accentButton = e.target.closest('[data-accent]');

      if (themeButton && root.contains(themeButton)) {
        e.preventDefault();
        window.DFTheme?.applyTheme(themeButton.dataset.theme, true);
        themeChanged = true;
      } else if (accentButton && root.contains(accentButton)) {
        e.preventDefault();
        window.DFTheme?.applyAccent(accentButton.dataset.accent, true);
        themeChanged = true;
      }

      if (themeChanged) {
        window.dispatchEvent(new CustomEvent('df-theme-changed'));
      }
    });
    </script>
</body>
</html>